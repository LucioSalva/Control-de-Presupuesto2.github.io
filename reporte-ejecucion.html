<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <title>Control de Presupuesto — Captura de Ejecución</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="icon" type="image/x-icon" href="public/ico/favicon.ico">

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Estilos propios -->
  <link rel="stylesheet" href="css/reporte-ejecucion.css">
</head>

<body>
  <nav class="navbar navbar-expand-lg shadow-sm">
  <div class="container-fluid">
    <a class="navbar-brand fw-semibold">
      <i class="bi bi-currency-dollar me-2"></i>Control Presupuestal
    </a>

    <!-- Buscar proyecto/partida -->
    <form id="nav-search" class="nav-search" autocomplete="off">
      <button type="submit" class="nav-search__btn" aria-label="Buscar ID">
        <i class="bi bi-search"></i>
      </button>
      <input id="proj-code" type="text" name="proj-code"
             class="form-control form-control-sm nav-search__input"
             aria-label="ID del proyecto" placeholder="ID Presupuesto">
    </form>

    <div class="logo-container">
      <img src="/public/img/ayuntamiento-de-ecatepec.png"
           alt="Ayuntamiento de Ecatepec" class="navbar-logo">
    </div>

    <div class="ms-auto d-flex gap-2 align-items-center">
      <button id="btn-export-xlsx" class="btn btn-outline-success btn-sm">
        <i class="bi bi-file-earmark-excel me-1"></i>Exportar Excel
      </button>
      <button id="btn-reset" class="btn btn-outline-danger btn-sm">
        <i class="bi bi-eraser me-1"></i>Reiniciar
      </button>
    </div>
  </div>
</nav>

<!-- NAVBAR DE PESTAÑAS -->
<nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm" style="min-height: 40px;">
  <div class="container-fluid">
    <ul class="navbar-nav me-auto mb-2 mb-lg-0" style="flex-direction: row;">
      <li class="nav-item">
        <a class="nav-link active" href="index.html">
          <i class="bi bi-house me-1"></i>Presupuesto
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="partidas.html">
          <i class="bi bi-list-check me-1"></i>Partidas Detalladas
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="projects.html">
          <i class="bi bi-diagram-3 me-1"></i>Proyectos
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="reporte-ejecucion.html">
          <i class="bi bi-diagram-3 me-1"></i>Ejecución
        </a>
      </li>
    </ul>
  </div>
</nav>

  <main class="container py-3">
    <div class="row justify-content-center">
      <div class="col-12 col-xl-10">
        <div class="card card-custom">
          <div class="card-header card-header-custom d-flex justify-content-between align-items-center">
            <div>
              <h5 class="mb-0">Captura de Ejecución del Presupuesto de Egresos</h5>
              <p class="mb-0 small-hint">
                Basado en el formato de “Reporte de ejecución del presupuesto de egresos anual”.
              </p>
            </div>
            <span class="badge bg-dark bg-opacity-50 badge-pill">
              <i class="bi bi-calendar3 me-1"></i>
              Ejercicio <span id="badge-ejercicio">2025</span>
            </span>
          </div>

          <div class="card-body p-4">
            <form id="form-ejecucion">

              <!-- Encabezado -->
              <div class="mb-3">
                <div class="form-section-title">Encabezado del reporte</div>
                <div class="row g-3">
                  <div class="col-6 col-md-3">
                    <label class="form-label" for="ejercicio">Ejercicio</label>
                    <input type="number" class="form-control" id="ejercicio" name="ejercicio" min="2000" max="2100" value="2025" required>
                  </div>
                  <div class="col-6 col-md-3">
                    <label class="form-label" for="periodo_del">Período del</label>
                    <input type="date" class="form-control" id="periodo_del" name="periodo_del" required>
                  </div>
                  <div class="col-6 col-md-3">
                    <label class="form-label" for="periodo_al">Período al</label>
                    <input type="date" class="form-control" id="periodo_al" name="periodo_al" required>
                  </div>
                  <div class="col-6 col-md-3">
                    <label class="form-label" for="fecha_elaboracion">Fecha de elaboración</label>
                    <input type="date" class="form-control" id="fecha_elaboracion" name="fecha_elaboracion" required>
                  </div>
                </div>
              </div>

              <hr class="border-secondary">

              <!-- Estructura programática -->
              <div class="mb-3">
                <div class="form-section-title">Estructura programática</div>
                <div class="row g-3">
                  <div class="col-md-2">
                    <label class="form-label" for="id_dgeneral">Dep. General</label>
                    <select class="form-select" id="id_dgeneral" name="id_dgeneral" required>
                      <option value="">Selecciona…</option>
                    </select>
                    <div class="small-hint">Ej. A00, L00…</div>
                  </div>
                  <div class="col-md-3">
                    <label class="form-label" for="id_dauxiliar">Dep. Auxiliar</label>
                    <select class="form-select" id="id_dauxiliar" name="id_dauxiliar" required>
                      <option value="">Selecciona…</option>
                    </select>
                  </div>
                  <div class="col-md-2">
                    <label class="form-label" for="id_fuente">Fuente</label>
                    <select class="form-select" id="id_fuente" name="id_fuente" required>
                      <option value="">Selecciona…</option>
                    </select>
                  </div>
                  <div class="col-md-2">
                    <label class="form-label" for="id_programa">Programa</label>
                    <select class="form-select" id="id_programa" name="id_programa" required>
                      <option value="">Selecciona…</option>
                    </select>
                  </div>
                  <div class="col-md-3">
                    <label class="form-label" for="id_proyecto">Proyecto</label>
                    <select class="form-select" id="id_proyecto" name="id_proyecto" required>
                      <option value="">Selecciona…</option>
                    </select>
                  </div>
                  <div class="col-md-3">
                    <label class="form-label" for="id_partida">Partida</label>
                    <select class="form-select" id="id_partida" name="id_partida" required>
                      <option value="">Selecciona…</option>
                    </select>
                  </div>
                  <div class="col-md-9">
                    <label class="form-label" for="descripcion_partida">Descripción de la partida / concepto</label>
                    <input type="text" class="form-control" id="descripcion_partida" name="descripcion_partida" maxlength="300" required>
                  </div>
                </div>
              </div>

              <hr class="border-secondary">

              <!-- Presupuesto -->
              <div class="mb-3">
                <div class="form-section-title">Presupuesto y modificaciones</div>
                <div class="row g-3">
                  <div class="col-md-3">
                    <label class="form-label" for="presupuesto_original">Presupuesto original</label>
                    <input type="number" step="0.01" class="form-control" id="presupuesto_original" name="presupuesto_original" required>
                  </div>
                  <div class="col-md-3">
                    <label class="form-label" for="ampliaciones">Ampliaciones</label>
                    <input type="number" step="0.01" class="form-control" id="ampliaciones" name="ampliaciones" value="0">
                  </div>
                  <div class="col-md-3">
                    <label class="form-label" for="reducciones">Reducciones</label>
                    <input type="number" step="0.01" class="form-control" id="reducciones" name="reducciones" value="0">
                  </div>
                  <div class="col-md-3">
                    <label class="form-label" for="presupuesto_modificado">Presupuesto modificado</label>
                    <input type="number" step="0.01" class="form-control" id="presupuesto_modificado" name="presupuesto_modificado" readonly>
                    <div class="small-hint">original + ampliaciones − reducciones</div>
                  </div>
                </div>
              </div>

              <!-- Ejecución -->
              <div class="mb-3 mt-2">
                <div class="form-section-title">Ejecución del gasto</div>
                <div class="row g-3">
                  <div class="col-md-3">
                    <label class="form-label" for="comprometido_mes">Comprometido del mes</label>
                    <input type="number" step="0.01" class="form-control" id="comprometido_mes" name="comprometido_mes" value="0">
                  </div>
                  <div class="col-md-3">
                    <label class="form-label" for="comprometido_acum">Comprometido acumulado</label>
                    <input type="number" step="0.01" class="form-control" id="comprometido_acum" name="comprometido_acum" value="0">
                  </div>
                  <div class="col-md-3">
                    <label class="form-label" for="devengado_mes">Devengado del mes</label>
                    <input type="number" step="0.01" class="form-control" id="devengado_mes" name="devengado_mes" value="0">
                  </div>
                  <div class="col-md-3">
                    <label class="form-label" for="devengado_acum">Devengado acumulado</label>
                    <input type="number" step="0.01" class="form-control" id="devengado_acum" name="devengado_acum" value="0">
                  </div>
                  <div class="col-md-3">
                    <label class="form-label" for="pagado_mes">Pagado del mes</label>
                    <input type="number" step="0.01" class="form-control" id="pagado_mes" name="pagado_mes" value="0">
                  </div>
                  <div class="col-md-3">
                    <label class="form-label" for="pagado_acum">Pagado acumulado</label>
                    <input type="number" step="0.01" class="form-control" id="pagado_acum" name="pagado_acum" value="0">
                  </div>
                  <div class="col-md-3">
                    <label class="form-label" for="reconduccion">Reconducción</label>
                    <input type="number" step="0.01" class="form-control" id="reconduccion" name="reconduccion" value="0">
                  </div>
                  <div class="col-md-3">
                    <label class="form-label" for="por_ejercer">Por ejercer</label>
                    <input type="number" step="0.01" class="form-control" id="por_ejercer" name="por_ejercer" readonly>
                    <div class="small-hint">modificado − dev. acumulado + reconducción</div>
                  </div>
                </div>
              </div>

              <!-- Desglose mensual -->
              <div class="mb-3 mt-2">
                <div class="form-section-title">Desglose mensual (opcional)</div>
                <div class="row g-2">
                  <div class="col-6 col-md-2">
                    <label class="form-label" for="monto_enero">Enero</label>
                    <input type="number" step="0.01" class="form-control" id="monto_enero" name="monto_enero" value="0">
                  </div>
                  <div class="col-6 col-md-2">
                    <label class="form-label" for="monto_febrero">Febrero</label>
                    <input type="number" step="0.01" class="form-control" id="monto_febrero" name="monto_febrero" value="0">
                  </div>
                  <div class="col-6 col-md-2">
                    <label class="form-label" for="monto_marzo">Marzo</label>
                    <input type="number" step="0.01" class="form-control" id="monto_marzo" name="monto_marzo" value="0">
                  </div>
                  <div class="col-6 col-md-2">
                    <label class="form-label" for="monto_abril">Abril</label>
                    <input type="number" step="0.01" class="form-control" id="monto_abril" name="monto_abril" value="0">
                  </div>
                  <div class="col-6 col-md-2">
                    <label class="form-label" for="monto_mayo">Mayo</label>
                    <input type="number" step="0.01" class="form-control" id="monto_mayo" name="monto_mayo" value="0">
                  </div>
                  <div class="col-6 col-md-2">
                    <label class="form-label" for="monto_junio">Junio</label>
                    <input type="number" step="0.01" class="form-control" id="monto_junio" name="monto_junio" value="0">
                  </div>
                  <div class="col-6 col-md-2">
                    <label class="form-label" for="monto_julio">Julio</label>
                    <input type="number" step="0.01" class="form-control" id="monto_julio" name="monto_julio" value="0">
                  </div>
                  <div class="col-6 col-md-2">
                    <label class="form-label" for="monto_agosto">Agosto</label>
                    <input type="number" step="0.01" class="form-control" id="monto_agosto" name="monto_agosto" value="0">
                  </div>
                  <div class="col-6 col-md-2">
                    <label class="form-label" for="monto_septiembre">Septiembre</label>
                    <input type="number" step="0.01" class="form-control" id="monto_septiembre" name="monto_septiembre" value="0">
                  </div>
                  <div class="col-6 col-md-2">
                    <label class="form-label" for="monto_octubre">Octubre</label>
                    <input type="number" step="0.01" class="form-control" id="monto_octubre" name="monto_octubre" value="0">
                  </div>
                  <div class="col-6 col-md-2">
                    <label class="form-label" for="monto_noviembre">Noviembre</label>
                    <input type="number" step="0.01" class="form-control" id="monto_noviembre" name="monto_noviembre" value="0">
                  </div>
                  <div class="col-6 col-md-2">
                    <label class="form-label" for="monto_diciembre">Diciembre</label>
                    <input type="number" step="0.01" class="form-control" id="monto_diciembre" name="monto_diciembre" value="0">
                  </div>
                </div>
              </div>

              <div class="mb-3">
                <label class="form-label" for="observaciones">Observaciones</label>
                <textarea class="form-control" id="observaciones" name="observaciones" rows="2"></textarea>
              </div>

              <div class="d-flex justify-content-between align-items-center mt-3">
                <div class="small-hint">
                  <i class="bi bi-info-circle me-1"></i>
                  Verifica que los totales coincidan con el reporte oficial antes de guardar.
                </div>
                <button type="submit" class="btn btn-primary">
                  <i class="bi bi-save me-1"></i>
                  Guardar registro
                </button>
              </div>

            </form>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- JS propio -->
  <script src="js/reporte-ejecucion.js"></script>
</body>

</html>
